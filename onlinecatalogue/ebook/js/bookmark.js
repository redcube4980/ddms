/*! $Id: bookmark.js 123 2012-02-15 06:13:16Z tomita $ */
var BookMark={};(function(){var b;var a;var j;function l(){return a.style.display=="none"?false:true}function i(){a.style.display="block"}function g(){a.style.display="none"}function d(){j.setCurrentPage(EZBook.getCurrentPage())}function c(){var o="";var m=j.getPages();if(m.length){o=m.join(",")}var n=new Date();n.setTime(n.getTime()+(1000*365*3600*24));document.cookie="eb_bm="+o+";expires="+n.toGMTString()}function f(){j.clear();var o=EBUtil.cookieValue("eb_bm");if(o){var m=o.split(",");for(var n=0;n<m.length;n++){var p=parseInt(m[n]);if(p<firstPage||p>lastPage){continue}k(p)}}}function k(n){if(j.count()>=BookMarkMax){alert(Lang.BookMarkLimitOverText);return}var m=n-modifiedPage>0?n-modifiedPage:"-";j.add(n,m)}function h(){var m=EZBook.getWidth();var n=EZBook.getHeight();if(IsLeftTemplate){a.style.left=EZBook.getPosX()+15+"px"}else{a.style.left=EZBook.getPosX()+m-250+"px"}a.style.top=EZBook.getPosY()+n-50+"px";j.setPos(EZBook.getPosX(),EZBook.getPosY());j.setSize(m,n)}function e(){b=document.getElementById("bookmarklayer");a=new Image;a.src="skinimage/book/bookmark.gif";a.style.cssText="position:absolute;top:0px;left:0px;display:none;cursor:pointer;";a.onclick=function(){var m=EZBook.getCurrentPage();if(j.exists(m)){j.remove(m)}else{k(m)}if(FeatureShioriSave){c()}};b.appendChild(a);j=new EBookBookMark;j.setLeftTemplate(IsLeftTemplate);b.appendChild(j.containerNode());if(FeatureShioriSave){f()}}BookMark.initialize=e;BookMark.layout=h;BookMark.getButtonStatus=l;BookMark.showButton=i;BookMark.hideButton=g;BookMark.update=d})();