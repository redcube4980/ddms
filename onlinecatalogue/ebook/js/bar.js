/*! $Id: bar.js 223 2013-11-18 05:50:54Z tomita $ */
var Bar={};(function(){var p;var B;var t;var A;var h;var m;var s;var q;var c;var x;var e;var j;var r;var n;var v;var k;var i;var u;var l;var o;var g;function w(C){return document.getElementById(C)}function d(C,F,D){var E="./skinimage/bar/"+EBUtil.templateName()+"/";C.src=E+F;EBUtil.setupAutoRollover(C,E+F,E+D)}function b(){p=w("goLeftMost");B=w("goLeft");t=w("goRight");A=w("goRightMost");h=w("PageNumber");m=w("MoveTargetNum");s=w("GotoButton");q=w("TOCButton");c=w("BookMarkButton");x=w("PDFButton");e=w("PrintButton");j=w("DownloadButton");r=w("DownloadButtonOff");i=w("SoundButton");n=w("CopyModeButton");v=w("CopyModeOffButton");k=w("CopyModeDisabledButton");u=w("AutoFeedButton");l=w("AutoCount");o=w("FrameButton");if(!Sound.checkSoundCapability()){soundMode=false}if(!Sound){soundMode=false}if(p){d(p,"leftmost.jpg","leftmost_ro.jpg");p.style.cursor="pointer";p.setAttribute("alt",IsLeftTemplate?Lang.GoFirstAlt:Lang.GoLastAlt);p.onclick=function(){onLeftMost()}}if(B){d(B,"left.jpg","left_ro.jpg");B.style.cursor="pointer";B.setAttribute("alt",IsLeftTemplate?Lang.GoPrevAlt:Lang.GoNextAlt);B.onclick=function(){onLeft()}}if(t){d(t,"right.jpg","right_ro.jpg");t.style.cursor="pointer";t.setAttribute("alt",IsLeftTemplate?Lang.GoNextAlt:Lang.GoPrevAlt);t.onclick=function(){onRight()}}if(A){d(A,"rightmost.jpg","rightmost_ro.jpg");A.style.cursor="pointer";A.setAttribute("alt",IsLeftTemplate?Lang.GoLastAlt:Lang.GoFirstAlt);A.onclick=function(){onRightMost()}}if(m){m.onclick=function(){m.value=""};m.onkeypress=function(E){var F=E||window.event;if(F.keyCode==13){var G=a(m.value);if(G===null){return}gotoPage(G+modifiedPage)}}}if(s){s.style.cursor="pointer";s.setAttribute("alt",Lang.GotoButtonAlt);s.onclick=function(){var E=a(m.value);if(E===null){return}gotoPage(E+modifiedPage)}}if(q){if(!FeatureFrame){q.style.cursor="pointer";q.setAttribute("alt",Lang.TOCButtonAlt);q.onmouseup=function(){if(SideBar.getStatus()=="opened"){SideBar.close()}else{SideBar.setContent(buildTOCHTML());SideBar.open()}}}else{q.style.display="none"}}if(c){c.style.cursor="pointer";c.setAttribute("alt",Lang.BookMarkButtonAlt);c.onclick=function(){if(BookMark.getButtonStatus()){BookMark.hideButton()}else{BookMark.showButton()}}}if(x){x.style.cursor="pointer";x.setAttribute("alt",Lang.PDFButtonAlt);x.onclick=function(){window.open("checkpdf.html?pg="+EZBook.getCurrentPage(),"checkPDF","left=0, top=0, width=360, height=130,resizable=no,scrollbars=no,status=false,menubar=no'")}}if(e){e.style.cursor="pointer";e.setAttribute("alt",Lang.PrintButtonAlt);e.onclick=function(){window.open("pageprint.html?pg="+EZBook.getCurrentPage(),"ebook_print","left=0, top=0, width=800, height=600, directories=no, status=no, location=no, menubar=no, scrollbars=no, resizable=yes, fullscreen=no")}}if(j){j.style.cursor="pointer";j.setAttribute("alt",Lang.DownloadButtonAlt);j.onclick=function(){if(BookContext.zoomed){var G=BookContext.zoomed_pg;if(!DLFileMap[G]){return}var E=DLFileMap[G];var F=window.open(E,"cad","width=465, height=600");F.focus()}else{var F=window.open("checkcad.html?pg="+EZBook.getCurrentPage(),"checkCAD","width=360, height=170,resizable=no,scrollbars=no,status=false,menubar=no'");F.focus()}};r.style.cursor="pointer";r.setAttribute("alt",Lang.DownloadButtonAlt)}if(i){if(soundMode){i.style.cursor="pointer";i.setAttribute("alt",Lang.SoundButtonAlt);i.onclick=function(){if(isBGM){if(g){g=false;i.src=i.getAttribute("offsrc");Sound.pauseSound()}else{g=true;i.src=i.getAttribute("onsrc");Sound.playSound()}}else{if(g){g=false;i.src=i.getAttribute("offsrc");Sound.stopPageSound()}else{g=true;i.src=i.getAttribute("onsrc");Sound.playPageSound()}}};if(InitialStatePlaySound){g=true;i.src=i.getAttribute("onsrc")}else{g=false;i.src=i.getAttribute("offsrc")}}else{i.style.display="none"}}if(n){var D=new EBUtil.Platform;if(D.supportCanvas()){k.style.display="none";n.style.cursor="pointer";n.setAttribute("alt",Lang.CopyModeButtonAlt);n.onclick=function(){setCopyAndPasteMode(BookContext.copy_and_paste_mode?false:true);f()};v.style.cursor="pointer";v.setAttribute("alt",Lang.CopyModeButtonAlt);v.onclick=n.onclick}else{n.style.display="none";v.style.display="none";k.style.display="block";k.setAttribute("alt",Lang.CopyModeButtonAlt)}}if(u){u.setAttribute("alt",Lang.AutoFeedButtonAlt);u.onclick=function(){if(BookContext.auto_feed_interval){u.src=u.getAttribute("offsrc");stopAutoFeed()}else{u.src=u.getAttribute("onsrc");startAutoFeed(parseInt(l.value)*1000)}};l.onchange=function(){if(BookContext.auto_feed_interval&&!BookContext.zoomed){startAutoFeed(parseInt(l.value)*1000)}}}if(FeatureFrame){o.style.display="block";o.style.cursor="pointer";o.setAttribute("alt",Lang.FrameButtonAlt);o.onmouseover=function(){if(top.getSideFrameStatus()=="opened"){o.src=o.getAttribute("close_onsrc")}else{o.src=o.getAttribute("open_onsrc")}};o.onmouseout=function(){if(top.getSideFrameStatus()=="opened"){o.src=o.getAttribute("close_offsrc")}else{o.src=o.getAttribute("open_offsrc")}};o.onmouseup=function(){if(top.getSideFrameStatus()=="opened"){top.closeSideFrame(function(){o.src=o.getAttribute("open_offsrc")})}else{top.openSideFrame(function(){o.src=o.getAttribute("close_offsrc")})}};if(InitialStateLeftViewOpened){o.src=o.getAttribute("close_offsrc")}else{o.src=o.getAttribute("open_offsrc")}}function C(){var E=EBUtil.absX(w("cb_container"));var F=EBUtil.absX(w("cb_last_button_pos"));if(!F){setTimeout(function(){C()},100);return false}w("cb_container").style.width=(F-E+20)+"px"}C()}function a(E){var D=firstPage-modifiedPage;var C=lastPage-modifiedPage;var F=parseInt(Util.TextProcessor.normalize(E));if(isNaN(F)||F<D||F>C){if(D<0){D=0}alert(Lang.PageRangeOverTextFunc(D,C));return null}return F}function z(){if(h){var D=EZBook.getCurrentPage();var C=D-modifiedPage;if(C<0){C=0}h.innerHTML=C+"/"+(lastPage-modifiedPage)}if(m){m.value=C}}function y(){if(!j){return}if(BookContext.zoomed){var C=BookContext.zoomed_pg;if(DLFileMap[C]){j.style.display="block";r.style.display="none"}else{j.style.display="none";r.style.display="block"}}else{var C=EZBook.getCurrentPage();if(DLFileMap[C]||DLFileMap[C+1]){j.style.display="block";r.style.display="none"}else{j.style.display="none";r.style.display="block"}}}function f(){if(!n){return}if(BookContext.copy_and_paste_mode){n.style.display="none";v.style.display="block"}else{n.style.display="block";v.style.display="none"}}Bar.initialize=b;Bar.updatePageNumber=z;Bar.updateDownloadButtonStatus=y})();